language: go

before_install:
  - go get github.com/magefile/mage
  - mage vendor

script:
  - mage check

after_success:
  - bash <(curl -s https://codecov.io/bash)

matrix:
  fast_finish: true
  include:
  - os: linux
    go: "1.11.x"
    cache:
      directories:
      - $HOME/.cache/go-build
      - $HOME/gopath/pkg/mod

  - os: linux
    go: "1.12.x"
    cache:
      directories:
      - $HOME/.cache/go-build
      - $HOME/gopath/pkg/mod

  - os: osx
    go: "1.11.x"
    cache:
      directories:
      - $HOME/Library/Caches/go-build
      - $HOME/gopath/pkg/mod

  - os: osx
    go: "1.12.x"
    cache:
      directories:
      - $HOME/Library/Caches/go-build
      - $HOME/gopath/pkg/mod

branches:
  except:
  - gh-pages


